<UserControl x:Class="Presentation.WPF.Views.BoardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:vm="clr-namespace:Presentation.WPF.Implementations"
             xmlns:con="clr-namespace:Presentation.WPF.Converters"
             xmlns:c="clr-namespace:Presentation.WPF.Controls"
             xmlns:v="clr-namespace:Presentation.WPF.Views"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="2500" Padding="10">

    <UserControl.Resources>

        <con:NodeStatusToColorConverter x:Key="StatusToColorConverter"/>
        <con:NameToNodeConverter x:Key="NameToNodeConverter"/>

        <DataTemplate x:Key="InfectionDataTemplate" DataType="{x:Type vm:NodeViewModel}">
            <c:ExtendedBorder c:ExtendedBorder.BorderColor="{Binding Status, Converter={StaticResource StatusToColorConverter}}" BorderBrush="LimeGreen" BorderThickness="2" Padding="4" CornerRadius="0" AnimatedBorderThickness="4" FrozenBorderThickness="2" AnimatedPadding="2" FrozenPadding="4">
                <Grid TextElement.Foreground="White">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid Grid.RowSpan="2" Background="Black" Opacity="0.5" Margin="-5"/>
                    <Grid VerticalAlignment="Center">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock HorizontalAlignment="Center" TextWrapping="Wrap">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Text" Value="{Binding Name}"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Name}" Value="St. Petersburg">
                                            <Setter Property="Text" Value="St. Peters&#x0a;-burg"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Name}" Value="Johannesburg">
                                            <Setter Property="Text" Value="Johannes&#x0a;-burg"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                        <Viewbox Grid.Column="1" Height="15" Margin="5,0,5,0">
                            <ContentControl Content="{Binding Disease, Converter={StaticResource DiseaseToIconConverter}}"/>
                        </Viewbox>
                    </Grid>
                    <UniformGrid Grid.Row="1" Rows="2" Columns="2" VerticalAlignment="Center">
                        <Grid DataContext="{Binding YellowCounter}" VerticalAlignment="Center">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Viewbox Grid.Column="1" Height="14" HorizontalAlignment="Center">
                                <ContentControl Content="{Binding Disease, Converter={StaticResource DiseaseToIconConverter}}"/>
                            </Viewbox>
                            <TextBlock Text="{Binding Count}" FontSize="14" HorizontalAlignment="Center"/>
                        </Grid>
                        <Grid DataContext="{Binding RedCounter}" VerticalAlignment="Center">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Viewbox Height="14" HorizontalAlignment="Center">
                                <ContentControl Content="{Binding Disease, Converter={StaticResource DiseaseToIconConverter}}"/>
                            </Viewbox>
                            <TextBlock Grid.Column="1" Text="{Binding Count}" FontSize="14" HorizontalAlignment="Center"/>
                        </Grid>
                        <Grid DataContext="{Binding BlueCounter}" VerticalAlignment="Center">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Viewbox Grid.Column="1" Height="14" HorizontalAlignment="Center">
                                <ContentControl Content="{Binding Disease, Converter={StaticResource DiseaseToIconConverter}}"/>
                            </Viewbox>
                            <TextBlock Text="{Binding Count}" FontSize="14" HorizontalAlignment="Center"/>
                        </Grid>
                        <Grid DataContext="{Binding BlackCounter}" VerticalAlignment="Center">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Viewbox Height="14" HorizontalAlignment="Center">
                                <ContentControl Content="{Binding Disease, Converter={StaticResource DiseaseToIconConverter}}"/>
                            </Viewbox>
                            <TextBlock Grid.Column="1" Text="{Binding Count}" FontSize="14" HorizontalAlignment="Center"/>
                        </Grid>
                    </UniformGrid>
                </Grid>
            </c:ExtendedBorder>
        </DataTemplate>

        <DataTemplate x:Key="PlayerDataTemplate" DataType="{x:Type vm:NodeViewModel}">
            <c:ExtendedBorder BorderThickness="2" Padding="4" CornerRadius="0" c:ExtendedBorder.BorderColor="{Binding Status, Converter={StaticResource StatusToColorConverter}}" BorderBrush="LimeGreen" AnimatedBorderThickness="4" FrozenBorderThickness="2" AnimatedPadding="2" FrozenPadding="4">
                <Border.ToolTip>
                    <ToolTip Background="Black" Foreground="White">
                        <ToolTip.Style>
                            <Style TargetType="ToolTip">
                                <Setter Property="Visibility" Value="Visible"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Players.Count}" Value="0">
                                        <Setter Property="Visibility" Value="Hidden"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </ToolTip.Style>
                        <HeaderedItemsControl ItemsSource="{Binding Players}"/>
                    </ToolTip>
                </Border.ToolTip>
                <Grid TextElement.Foreground="White">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid Grid.RowSpan="2" Background="Black" Opacity=".5" Margin="-5"/>
                    <Grid VerticalAlignment="Center">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock HorizontalAlignment="Center" TextWrapping="Wrap">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Text" Value="{Binding Name}"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Name}" Value="St. Petersburg">
                                            <Setter Property="Text" Value="St. Peters&#x0a;-burg"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Name}" Value="Johannesburg">
                                            <Setter Property="Text" Value="Johannes&#x0a;-burg"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                        <Viewbox Grid.Column="1" Height="15" Margin="5,0,5,0">
                            <ContentControl Content="{Binding Disease, Converter={StaticResource DiseaseToIconConverter}}"/>
                        </Viewbox>
                    </Grid>
                    <Grid Grid.Row="1" Margin="0,3,0,0">
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="5">
                            <StackPanel.Resources>
                                <Style TargetType="ContentControl">
                                    <Setter Property="Content" Value="{StaticResource man}"/>
                                </Style>
                            </StackPanel.Resources>
                            <Viewbox Height="30">
                                <ContentControl x:Name="man1"/>
                            </Viewbox>
                            <Viewbox Height="35">
                                <ContentControl x:Name="man2"/>
                            </Viewbox>
                            <Viewbox Height="30">
                                <ContentControl x:Name="man3"/>
                            </Viewbox>
                        </StackPanel>
                    </Grid>
                </Grid>
            </c:ExtendedBorder>
            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding Players.Count}" Value="0">
                    <Setter TargetName="man1" Property="Content" Value=""/>
                    <Setter TargetName="man2" Property="Content" Value=""/>
                    <Setter TargetName="man3" Property="Content" Value=""/>
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>

        <DataTemplate x:Key="ResearchStationDataTemplate" DataType="{x:Type vm:NodeViewModel}">
            <c:ExtendedBorder BorderThickness="2" Padding="4" CornerRadius="0" c:ExtendedBorder.BorderColor="{Binding Status, Converter={StaticResource StatusToColorConverter}}" BorderBrush="LimeGreen" AnimatedBorderThickness="4" FrozenBorderThickness="2" AnimatedPadding="2" FrozenPadding="4">
                <Border.ToolTip>
                    <ToolTip Background="Black" Foreground="White">
                        <ToolTip.Style>
                            <Style TargetType="ToolTip">
                                <Setter Property="Visibility" Value="Visible"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding ResearchStation}" Value="False">
                                        <Setter Property="Visibility" Value="Hidden"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </ToolTip.Style>
                        <TextBlock Text="Has Research Station"/>
                    </ToolTip>
                </Border.ToolTip>
                <Grid TextElement.Foreground="White">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid Grid.RowSpan="2" Background="Black" Opacity=".5" Margin="-5"/>
                    <Grid VerticalAlignment="Center">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock HorizontalAlignment="Center" TextWrapping="Wrap">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Text" Value="{Binding Name}"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Name}" Value="St. Petersburg">
                                            <Setter Property="Text" Value="St. Peters&#x0a;-burg"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Name}" Value="Johannesburg">
                                            <Setter Property="Text" Value="Johannes&#x0a;-burg"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                        <Viewbox Grid.Column="1" Height="15" Margin="5,0,5,0">
                            <ContentControl Content="{Binding Disease, Converter={StaticResource DiseaseToIconConverter}}"/>
                        </Viewbox>
                    </Grid>
                    <Grid Grid.Row="1" Margin="0,3,0,0">
                        <Viewbox Height="50">
                            <ContentControl x:Name="Lightbulb"/>
                        </Viewbox>
                    </Grid>
                </Grid>
            </c:ExtendedBorder>
            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding ResearchStation}" Value="True">
                    <Setter TargetName="Lightbulb" Property="Content" Value="{StaticResource lightbulb}"/>
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>

    </UserControl.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="auto"/>
        </Grid.ColumnDefinitions>
        <Border Grid.Column="1" BorderBrush="Gray" BorderThickness="1,0,0,0">
            <Grid Margin="10,0,0,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid.Resources>
                    <Style TargetType="RadioButton">
                        <Setter Property="Height" Value="50"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="RadioButton">
                                    <Border Name="Border" Background="Transparent" BorderBrush="Transparent" BorderThickness="{StaticResource StandardBorderThickness}" CornerRadius="{StaticResource StandardCornerRadius}" Width="30" Height="30" Margin="1">
                                        <ContentPresenter Margin="2"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsChecked" Value="True">
                                            <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource StandardBorderBrush}"/>
                                        </Trigger>
                                        <Trigger SourceName="Border" Property="IsMouseOver" Value="True">
                                            <Setter TargetName="Border" Property="Background" Value="{StaticResource StandardMouseOverBrush}"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                    <Style TargetType="ToolTip">
                        <Setter Property="Background" Value="Black"/>
                        <Setter Property="Foreground" Value="White"/>
                    </Style>
                </Grid.Resources>
                <RadioButton x:Name="InfectionViewButton" IsChecked="True" HorizontalAlignment="Center" ToolTip="Infections">
                    <RadioButton.Content>
                        <Viewbox Height="20" Width="20">
                            <ContentControl Content="{StaticResource compoundWhite}"/>
                        </Viewbox>
                    </RadioButton.Content>
                </RadioButton>
                <RadioButton Grid.Row="1" x:Name="PlayerViewButton" HorizontalAlignment="Center" ToolTip="Players">
                    <RadioButton.Content>
                        <Viewbox Height="20" Width="20">
                            <ContentControl Content="{StaticResource man}"/>
                        </Viewbox>
                    </RadioButton.Content>
                </RadioButton>
                <RadioButton Grid.Row="2" x:Name="ResearchViewButton" HorizontalAlignment="Center" ToolTip="Research Stations">
                    <RadioButton.Content>
                        <Viewbox Height="20" Width="20">
                            <ContentControl Content="{StaticResource lightbulb}"/>
                        </Viewbox>
                    </RadioButton.Content>
                </RadioButton>
            </Grid>
        </Border>
        <Border ClipToBounds="True" Background="Transparent" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" MouseWheel="Border_MouseWheel" MouseEnter="Border_MouseEnter" MouseLeftButtonDown="Border_MouseLeftButtonDown" MouseMove="Border_MouseMove" MouseLeftButtonUp="Border_MouseLeftButtonUp">
            <Canvas x:Name="Canvas" Width="6000" Height="3000" RenderTransformOrigin="0,0">
                <Canvas.Background>
                    <VisualBrush>
                        <VisualBrush.Visual>
                            <ContentControl Content="{StaticResource world}"/>
                        </VisualBrush.Visual>
                    </VisualBrush>
                </Canvas.Background>
                <Canvas.RenderTransform>
                    <TransformGroup>
                        <ScaleTransform ScaleX="1" ScaleY="1"/>
                        <TranslateTransform X="0" Y="0"/>
                    </TransformGroup>
                </Canvas.RenderTransform>
                <Canvas.Resources>
                    <Style TargetType="c:Anchor">
                        <Setter Property="CornerRadius" Value="90"/>
                        <Setter Property="Padding" Value="20"/>
                        <Setter Property="GlowBrush" Value="White"/>
                        <Setter Property="Panel.ZIndex" Value="1000"/>
                    </Style>
                    <Style TargetType="TextBlock">
                        <Setter Property="Foreground" Value="White"/>
                        <Setter Property="FontSize" Value="32"/>
                    </Style>
                </Canvas.Resources>
                <c:Anchor x:Name="MTL" Background="Blue" Canvas.Left="1600" Canvas.Top="1075"/>
                <TextBlock Text="MONTREAL" Canvas.Left="1550" Canvas.Top="1030"/>
                <c:Anchor x:Name="CHI" Background="Blue" Canvas.Left="1275" Canvas.Top="1100"/>
                <TextBlock Text="CHICAGO" Canvas.Left="1225" Canvas.Top="1055"/>
                <c:Anchor x:Name="SF" Background="Blue" Canvas.Left="750" Canvas.Top="1175"/>
                <TextBlock Text="SAN FRANCISCO" Canvas.Left="675" Canvas.Top="1130"/>
                <c:Anchor x:Name="NY" Background="Blue" Canvas.Left="1875" Canvas.Top="1125"/>
                <TextBlock Text="NEW YORK" Canvas.Left="1850" Canvas.Top="1080"/>
                <c:Anchor x:Name="WSH" Background="Blue" Canvas.Left="1750" Canvas.Top="1325"/>
                <TextBlock Text="WASHINGTON" Canvas.Left="1855" Canvas.Top="1345"/>
                <c:Anchor x:Name="ATL" Background="Blue" Canvas.Left="1375" Canvas.Top="1350"/>
                <TextBlock Text="ATLANTA" Canvas.Left="1340" Canvas.Top="1440"/>
                <c:Anchor x:Name="LON" Background="Blue" Canvas.Left="2575" Canvas.Top="1000"/>
                <TextBlock Text="LONDON" Canvas.Left="2550" Canvas.Top="955"/>
                <c:Anchor x:Name="MAD" Background="Blue" Canvas.Left="2575" Canvas.Top="1250"/>
                <TextBlock Text="MADRID" Canvas.Left="2435" Canvas.Top="1300"/>
                <c:Anchor x:Name="PAR" Background="Blue" Canvas.Left="2875" Canvas.Top="1125"/>
                <TextBlock Text="PARIS" Canvas.Left="2775" Canvas.Top="1150"/>
                <c:Anchor x:Name="MIA" Background="Yellow" Canvas.Left="1600" Canvas.Top="1575"/>
                <TextBlock Text="MIAMI" Canvas.Left="1705" Canvas.Top="1595"/>
                <c:Anchor x:Name="LA" Background="Yellow" Canvas.Left="800" Canvas.Top="1525"/>
                <TextBlock Text="LOS ANGELES" Canvas.Left="775" Canvas.Top="1625"/>
                <c:Anchor x:Name="MEX" Background="Yellow" Canvas.Left="1100" Canvas.Top="1600"/>
                <c:ConnectedContent Canvas="{Binding ElementName=Canvas}" Originator="{Binding ElementName=SF}" Target="{Binding ElementName=CHI}"/>
                <c:ConnectedContent Canvas="{Binding ElementName=Canvas}" Originator="{Binding ElementName=CHI}" Target="{Binding ElementName=MTL}"/>
                <c:ConnectedContent Canvas="{Binding ElementName=Canvas}" Originator="{Binding ElementName=CHI}" Target="{Binding ElementName=ATL}"/>
                <c:ConnectedContent Canvas="{Binding ElementName=Canvas}" Originator="{Binding ElementName=WSH}" Target="{Binding ElementName=ATL}"/>
                <c:ConnectedContent Canvas="{Binding ElementName=Canvas}" Originator="{Binding ElementName=NY}" Target="{Binding ElementName=MTL}"/>
                <c:ConnectedContent Canvas="{Binding ElementName=Canvas}" Originator="{Binding ElementName=NY}" Target="{Binding ElementName=WSH}"/>
                <c:ConnectedContent Canvas="{Binding ElementName=Canvas}" Originator="{Binding ElementName=NY}" Target="{Binding ElementName=LON}"/>
                <c:ConnectedContent Canvas="{Binding ElementName=Canvas}" Originator="{Binding ElementName=NY}" Target="{Binding ElementName=MAD}"/>
                <c:ConnectedContent Canvas="{Binding ElementName=Canvas}" Originator="{Binding ElementName=WSH}" Target="{Binding ElementName=MTL}"/>
                <c:ConnectedContent Canvas="{Binding ElementName=Canvas}" Originator="{Binding ElementName=LON}" Target="{Binding ElementName=MAD}"/>
                <c:ConnectedContent Canvas="{Binding ElementName=Canvas}" Originator="{Binding ElementName=PAR}" Target="{Binding ElementName=LON}"/>
                <c:ConnectedContent Canvas="{Binding ElementName=Canvas}" Originator="{Binding ElementName=PAR}" Target="{Binding ElementName=MAD}"/>
                <c:ConnectedContent Canvas="{Binding ElementName=Canvas}" Originator="{Binding ElementName=WSH}" Target="{Binding ElementName=MIA}"/>
                <c:ConnectedContent Canvas="{Binding ElementName=Canvas}" Originator="{Binding ElementName=ATL}" Target="{Binding ElementName=MIA}"/>
                <c:ConnectedContent Canvas="{Binding ElementName=Canvas}" Originator="{Binding ElementName=LA}" Target="{Binding ElementName=SF}"/>
                <c:ConnectedContent Canvas="{Binding ElementName=Canvas}" Originator="{Binding ElementName=LA}" Target="{Binding ElementName=CHI}"/>
                <c:ConnectedContent Canvas="{Binding ElementName=Canvas}" Originator="{Binding ElementName=LA}" Target="{Binding ElementName=MEX}"/>
                <c:ConnectedContent Canvas="{Binding ElementName=Canvas}" Originator="{Binding ElementName=CHI}" Target="{Binding ElementName=MEX}"/>
                <c:ConnectedContent Canvas="{Binding ElementName=Canvas}" Originator="{Binding ElementName=MIA}" Target="{Binding ElementName=MEX}"/>
            </Canvas>
        </Border>
    </Grid>

</UserControl>
